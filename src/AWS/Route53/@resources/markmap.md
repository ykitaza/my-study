
# Route53

## CNAMEとAliasレコード
### 共通点
- CNAMEとAliasは、ドメイン名を別のドメイン名にエイリアスするために使用される。

### それぞれの特徴
#### CNAME
- 非ルートドメインにのみ使用できる。例えば、www.example.comのようなサブドメインに使用できる。
#### Alias
- ルートドメインにも使用できる。例えば、example.comのようなルートドメイン(=Zone Apex)に使用できる。

### どちらを使うべきか
- ルートドメインの場合はAliasを使う。
- それ以外の場合もAliasを使う方が、コストが安くなる。

### ユースケース

- AWSリソース（例：ELB、CloudFront、S3バケット）のAWSによって提供されるドメイン名を、自分のドメイン名にエイリアスしたい場合


## 8種類のルーティングポリシー

### 1対1 のルーティング
- ポリシー名：シンプルルーティングポリシー

### アクティブ側のシステムへのルーティング
- ポリシー名：フェイルオーバールーティングポリシー
- 設定方法： レコード作成時にルーティングポリシーで「Failover」を選択し、同じDNS名に対してPrimaryとSecondaryの2つのレコードを作成する。

### ユーザの位置情報に基づくルーティング
- ポリシー名：位置情報ルーティングポリシー
- ユースケース： クライアントの位置情報（国や地域）によって、応答する情報を変えたい場合などに利用する

### リソースの場所(距離)に基づくルーティング
- ポリシー名：地理的近接性ルーティングポリシー
- ユースケース： トラフィックレイテンシーを下げ、ビジネス要件で特定リージョンへの振り分けを調整したい場合などに利用する。
  - 例えば、コスト最適化のため、安価なリージョンにより多くのトラフィックを振り分けたい場合などに利用する。

### レイテンシーが最小化されるようにルーティング
- ポリシー名：レイテンシールーティングポリシー
- ユースケース： 最も応答が早いリージョンを自動的に選択する場合などに利用する

### 正常に稼働しているサーバーの中からランダムにルーティング
- ポリシー名：複数値回答ルーティングポリシー
- 設定方法： ひとつのレコードに異なるIPアドレスを複数登録する

### 指定した比率でルーティング
- ポリシー名：加重ルーティングポリシー
- ユースケース： 例えば、A/Bテストで、サーバーAに50%、サーバーBに50%のトラフィックを振り分けたい場合などに利用する。

### クライアントのIPアドレスに基づくルーティング
- ポリシー名：IPベースルーティングポリシー
- ユースケース： より利用者に特有の情報に基づいてルーティングを最適化したい場合などに利用する。

## 位置情報ルーティングポリシーと地理的近接性ルーティングポリシーの違い
- 位置情報は「静的なルールベース」、地理的近接性は「動的な距離ベース」でルーティングを行う。


## トラフィックフローを使ったルーティングポリシーの設定
### ユースケース
- 複数のルーティングポリシーを使って、複雑なトラフィックフローを実現する場合に、レコードの設定をビジュアル的にわかりやすく組み合わせて設定できる。
### [参考記事](https://qiita.com/Unimaru/items/7a57fb52870c496dd52b)